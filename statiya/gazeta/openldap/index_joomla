<p> </p>
<p><strong>Скачиваем исходники </strong></p>
<table border="1">
<tbody>
<tr>
<td><a href="ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-2.4.8.tgz"><span style="color: green; font-size:2 x-small;"><strong>openldap-2.4.8.tgz</strong></span></a></td>
</tr>
<tr>
<td><a href="http://contribs.martymac.com/ldapscripts/ldapscripts-1.4.tgz"><span style="color: green; font-size:2 x-small;"><strong>ldapscripts-1.4.tgz</strong></span></a></td>
</tr>
<tr>
<td><a href="http://www.oracle.com/technology/software/products/berkeley-db/index.html"><span style="color: green; font-size:2 x-small;"><strong>db-4.6.21.tar.gz</strong></span></a></td>
</tr>
</tbody>
</table>
<p> </p>
<p><strong><span style="color: blue; font-size: small;">Устанавливаем openldap </span></strong></p>
<p><span style="color: red;"><strong>1.1</strong></span> Распоковываем наши скаченные файлы:</p>
<div class="codeheader">/root/</div>
<div class="code">[root@localhost ~]# tar -zxf openldap-2.4.8.tgz<br /> [root@localhost ~]# tar -zxf ldapscripts-1.4.tgz<br /> [root@localhost ~]# tar -zxf db-4.6.21.tar.gz<br /> <br /><br /> [root@localhost ~]# ls | grep ldap<br /> ldapscripts-1.4<br /> ldapscripts-1.4.tgz<br /> openldap-2.4.8<br /> openldap-2.4.8.tgz<br /> <br /><br /> [root@localhost ~]# ls | grep db<br /> db-4.6.21<br /> db-4.6.21.tar.gz</div>
<p> </p>
<p><span style="color: red;"><strong>1.1</strong></span> Compile Berkeley DB(ставим из исходников  в силу того , что пакеты "db4-4.3.29-9.fc6.i386, db4-devel-4.3.29-9.fc6.i386" не подходят для нашего openldap) : вводим по очередности команды <br />../dist/configure --prefix=/usr <br />make <br />make install</p>
<div class="codeheader">/root/db-4.6.21/build_unix/</div>
<div class="code">[root@localhost build_unix]# ../dist/configure --prefix=/usr &amp;&amp; make &amp;&amp; make install<br /> checking build system type... i686-pc-linux-gnu<br /> checking host system type... i686-pc-linux-gnu<br /> checking if building in the top-level or dist directories... no<br /> checking if --disable-cryptography option specified... no<br /> checking if --disable-hash option specified... no<br /> checking if --disable-mutexsupport option specified... no<br /> checking if --disable-queue option specified... no<br /> checking if --disable-replication option specified... no<br /> checking if --disable-statistics option specified... no<br /> checking if --disable-verify option specified... no<br /> checking if --enable-compat185 option specified... no<br /> checking if --enable-cxx option specified... no<br /> checking if --enable-debug option specified... no<br /> checking if --enable-debug_rop option specified... no<br /> checking if --enable-debug_wop option specified... no<br /> checking if --enable-diagnostic option specified... no<br /> checking if --enable-dump185 option specified... no<br /> checking if --enable-java option specified... no<br /> checking if --enable-mingw option specified... no<br /> ........................................................<br /> Installing DB utilities: /usr/bin ...<br /> cp -p .libs/db_archive /usr/bin/db_archive<br /> cp -p .libs/db_checkpoint /usr/bin/db_checkpoint<br /> cp -p .libs/db_codegen /usr/bin/db_codegen<br /> cp -p .libs/db_deadlock /usr/bin/db_deadlock<br /> cp -p .libs/db_dump /usr/bin/db_dump<br /> cp -p .libs/db_hotbackup /usr/bin/db_hotbackup<br /> cp -p .libs/db_load /usr/bin/db_load<br /> cp -p .libs/db_printlog /usr/bin/db_printlog<br /> cp -p .libs/db_recover /usr/bin/db_recover<br /> cp -p .libs/db_stat /usr/bin/db_stat<br /> cp -p .libs/db_upgrade /usr/bin/db_upgrade<br /> cp -p .libs/db_verify /usr/bin/db_verify<br /> Installing documentation: /usr/docs ...<br /> <br /></div>
<p><span style="color: red;"><strong>1.2</strong></span> Compile openldap: вводим по очередности команды <br />./configure <br />make depend <br />make <br />make install</p>
<div class="codeheader">/root/openldap-2.4.8/</div>
<div class="code">[root@localhost openldap-2.4.8]# ./configure &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install<br /> Configuring OpenLDAP 2.4.8-Release ...<br /> checking build system type... i686-pc-linux-gnu<br /> checking host system type... i686-pc-linux-gnu<br /> checking target system type... i686-pc-linux-gnu<br /> checking for a BSD-compatible install... /usr/bin/install -c<br /> checking whether build environment is sane... yes<br /> checking for gawk... gawk<br /> checking whether make sets $(MAKE)... yes<br /> checking configure arguments... done<br /> checking for cc... cc<br /> checking for ar... ar<br /> checking for style of include used by make... GNU<br /> checking for C compiler default output file name... a.out<br /> checking whether the C compiler works... yes<br /> checking whether we are cross compiling... no<br /> checking for suffix of executables...<br /> checking for suffix of object files... o<br /> checking whether we are using the GNU C compiler... yes<br /> checking whether cc accepts -g... yes<br /> checking for cc option to accept ANSI C... none needed<br /> checking dependency style of cc... none<br /> checking for a sed that does not truncate output... /bin/sed<br /> checking for egrep... grep -E<br /> checking for ld used by cc... /usr/bin/ld<br /> checking if the linker (/usr/bin/ld) is GNU ld... yes<br /> checking for /usr/bin/ld option to reload object files... -r<br /> checking for BSD-compatible nm... /usr/bin/nm -B<br /> checking whether ln -s works... yes<br /> checking how to recognise dependent libraries... pass_all<br /> checking how to run the C preprocessor... cc -E<br /> checking for ANSI C header files... yes<br /> checking for sys/types.h... yes<br /> checking for sys/stat.h... yes<br /> checking for stdlib.h... yes<br /> checking for string.h... yes<br /> checking for memory.h... yes<br /> checking for strings.h... yes<br /> checking for inttypes.h... yes<br /> checking for stdint.h... yes<br /> checking for unistd.h... yes<br /> checking dlfcn.h usability... yes<br /> .........................................................................................<br /> installing slapacl.8 in /usr/local/man/man8<br /> installing slapadd.8 in /usr/local/man/man8<br /> installing slapauth.8 in /usr/local/man/man8<br /> installing slapcat.8 in /usr/local/man/man8<br /> installing slapd.8 in /usr/local/man/man8<br /> installing slapdn.8 in /usr/local/man/man8<br /> installing slapindex.8 in /usr/local/man/man8<br /> installing slappasswd.8 in /usr/local/man/man8<br /> installing slaptest.8 in /usr/local/man/man8<br /> make[3]: Leaving directory `/root/openldap-2.4.8/doc/man/man8'<br /> <br /> make[2]: Leaving directory `/root/openldap-2.4.8/doc/man'<br /> <br /> make[1]: Leaving directory `/root/openldap-2.4.8/doc'<br /> <br /> <br /></div>
<p><span style="color: red;"><strong>1.3</strong></span> Ставим ldapscripts-1.4:</p>
<div class="codeheader">/root/ldapscripts-1.4/</div>
<div class="code">[root@localhost ldapscripts-1.4]# ./install<br /> Ldapscripts are now installed ! See README for more details...<br /> [root@localhost ldapscripts-1.4]# ls /etc/ | grep ldapscripts<br /> ldapscripts<br /> [root@localhost ldapscripts-1.4]#</div>
<p> </p>
<p><span style="color: red;"><strong>1.4</strong></span> Ставим пакет nss_ldap</p>
<div class="codeheader">/root/</div>
<div class="code">[root@localhost ~]# rpm -ihv nss_ldap-253-5.el5.i386.rpm<br /> предупреждение: nss_ldap-253-5.el5.i386.rpm: Заголовок V3 DSA signature: NOKEY, key ID e8562897<br /> Подготовка...     ########################################### [100%]<br /> 1:nss_ldap               ########################################### [100%]<br /> <br /></div>
<p> </p>
<p><strong><span style="color: blue; font-size: small;">Настройка openldap </span></strong></p>
<p><span style="color: red;"><strong>2.1</strong></span> Переминовываем фаил DB_CONFIG.example --&gt; DB_CONFIG<br /> Задавем пароль на вход в ldap(123456)---&gt; slappasswd<br /> Копируем фаил samba.schema -------------&gt; /usr/local/etc/openldap/schema</p>
<div class="codeheader">/usr/local/etc/openldap/</div>
<div class="code">[root@localhost openldap]# mv DB_CONFIG.example DB_CONFIG<br /> [root@localhost openldap]# slappasswd<br /> New password:<br /> Re-enter new password:<br /> {SSHA}MrZV6JGINeuyFVrqfmwvPHk3waqbs87x<br /> [root@localhost openldap]# find / -name "samba.schema"<br /> /usr/share/doc/samba-3.0.25b/LDAP/samba.schema<br /> [root@localhost openldap]# cp /usr/share/doc/samba-3.0.25b/LDAP/samba.schema schema/</div>
<p> </p>
<p><span style="color: red;"><strong>2.2</strong></span> Правим фаил slapd.conf:</p>
<div class="codeheader">/usr/local/etc/openldap/</div>
<div class="code">[root@localhost openldap]# egrep -v '^#|^$' slapd.conf<br /> include         /usr/local/etc/openldap/schema/core.schema<br /> include         /usr/local/etc/openldap/schema/cosine.schema<br /> include         /usr/local/etc/openldap/schema/inetorgperson.schema<br /> include         /usr/local/etc/openldap/schema/misc.schema<br /> include         /usr/local/etc/openldap/schema/nis.schema<br /> include         /usr/local/etc/openldap/schema/openldap.schema<br /> include         /usr/local/etc/openldap/schema/samba.schema<br /> <br /><br /> pidfile         /usr/local/var/run/slapd.pid<br /> argsfile        /usr/local/var/run/slapd.args<br /> <br /><br /> modulepath    /usr/local/libexec/openldap<br /> moduleload    back_bdb.la<br /> <br /><br /> access to attrs=userPassword<br /> by self write<br /> by anonymous auth<br /> by * none<br /> access to *<br /> by self write<br /> by anonymous read<br /> by * none<br /> <br /> <br /> database        bdb<br /> suffix          "dc=spacedust,dc=ru"<br /> rootdn          "cn=root,dc=spacedust,dc=ru"<br /> rootpw          {SSHA}MrZV6JGINeuyFVrqfmwvPHk3waqbs87x<br /> <br /><br /> directory       /usr/local/var/openldap-data<br /> loglevel        256<br /> index   objectClass     eq<br /> index   cn              eq</div>
<p> </p>
<p><span style="color: red;"><strong>2.2</strong></span> Создадим фаил 1.ldif нашим корневым обьектом (dn: dc=spacedust,dc=ru) и несколькими контейнерами (users,computers,groups)</p>
<div class="codeheader">/usr/local/etc/openldap/</div>
<div class="code">[root@localhost openldap]# cat 1.ldif<br /> dn: dc=spacedust,dc=ru<br /> objectClass: dcObject<br /> objectClass: organization<br /> objectClass: top<br /> dc: spacedust<br /> o: spacedust<br /> <br /><br /> dn: ou=users,dc=spacedust,dc=ru<br /> objectClass: top<br /> objectClass: organizationalUnit<br /> ou: users<br /> <br /><br /> dn: ou=groups,dc=spacedust,dc=ru<br /> objectClass: top<br /> objectClass: organizationalUnit<br /> ou: groups<br /> <br /><br /> dn: ou=computers,dc=spacedust,dc=ru<br /> objectClass: top<br /> objectClass: organizationalUnit<br /> ou: computers<br /> <br /></div>
<p><br /> Запускаем наш ldap и пробуем добавить</p>
<div class="codeheader">/usr/local/etc/openldap/</div>
<div class="code">[root@localhost openldap]# /usr/local/libexec/slapd<br /> [root@localhost openldap]# ps -A | grep slapd<br /> 12751 ?        00:00:00 slapd<br /> <br /><br /> [root@localhost openldap]# ldapadd -x -D "cn=root,dc=spacedust,dc=ru" -w 123456 -f 1.ldif<br /> adding new entry "dc=spacedust,dc=ru"<br /> adding new entry "ou=users,dc=spacedust,dc=ru"<br /> adding new entry "ou=groups,dc=spacedust,dc=ru"<br /> adding new entry "ou=computers,dc=spacedust,dc=ru"</div>
<p><br /> Проверяем</p>
<div class="codeheader">/usr/local/etc/openldap/</div>
<div class="code">[root@localhost openldap]#  ldapsearch -LLL -x -b 'dc=spacedust,dc=ru' '*'<br /> dn: dc=spacedust,dc=ru<br /> objectClass: dcObject<br /> objectClass: organization<br /> objectClass: top<br /> dc: spacedust<br /> o: spacedust<br /> <br /><br /> dn: ou=users,dc=spacedust,dc=ru<br /> objectClass: top<br /> objectClass: organizationalUnit<br /> ou: users<br /> <br /><br /> dn: ou=groups,dc=spacedust,dc=ru<br /> objectClass: top<br /> objectClass: organizationalUnit<br /> ou: groups<br /> <br /><br /> dn: ou=computers,dc=spacedust,dc=ru<br /> objectClass: top<br /> objectClass: organizationalUnit<br /> ou: computers</div>
<p> </p>
<p><span style="color: red;"><strong>2.3</strong></span> Правим фаил ldap.conf ---&gt; /etc/ldap.conf<br /> Правим фаил nsswitch.conf ---&gt; /etc/nsswitch.conf<br /> Правим фаил ldapscripts.conf ---&gt; /etc/ldapscripts/ldapscripts.conf<br /> Правим фаил ldapadduser ----------&gt; /usr/local/bin/ldapadduser</p>
<div class="codeheader">/etc/ldap.conf</div>
<div class="code">[root@localhost etc]# egrep -v '^#|^$' ldap.conf<br /> base dc=spacedust,dc=ru<br /> bind_policy soft<br /> bind_timelimit 10<br /> host localhost<br /> idle_timelimit 3600<br /> ldap_version 3<br /> nss_base_group  ou=groups,dc=spacedust,dc=ru?one<br /> nss_base_passwd ou=users,dc=spacedust,dc=ru?one<br /> nss_base_passwd ou=computers,dc=spacedust,dc=ru?one<br /> nss_base_shadow ou=users,dc=spacedust,dc=ru?one<br /> nss_connect_policy persist<br /> nss_paged_results yes<br /> pagesize 1000<br /> port 389<br /> scope one<br /> timelimit 30</div>
<p> </p>
<div class="codeheader">/etc/nsswitch.conf</div>
<div class="code">[root@localhost etc]# egrep -v '^#|^$' nsswitch.conf<br /> group: files ldap<br /> hosts: files dns<br /> networks: files<br /> passwd: files ldap<br /> shadow: files ldap<br /> shells: files</div>
<p> </p>
<div class="codeheader">/etc/ldapscripts/ldapscripts.conf</div>
<div class="code">[root@localhost ldapscripts]# egrep -v '^#|^$' ldapscripts.conf<br /> SERVER="localhost"<br /> BINDDN="cn=root,dc=spacedust,dc=ru"<br /> BINDPWD="123456"<br /> SUFFIX="dc=spacedust,dc=ru"<br /> GSUFFIX="ou=groups"<br /> USUFFIX="ou=users"<br /> MSUFFIX="ou=computers"<br /> GIDSTART="10000"<br /> UIDSTART="10000"<br /> MIDSTART="20000"<br /> USHELL="/sbin/nologin"<br /> UHOMES="/home/%u"<br /> CREATEHOMES="yes"<br /> HOMESKEL="/etc/skel"<br /> LOGFILE="/var/log/ldapscripts.log"<br /> LDAPSEARCHBIN="/usr/local/bin/ldapsearch"<br /> LDAPADDBIN="/usr/local/bin/ldapadd"<br /> LDAPDELETEBIN="/usr/local/bin/ldapdelete"<br /> LDAPMODIFYBIN="/usr/local/bin/ldapmodify"<br /> LDAPMODRDNBIN="/usr/local/bin/ldapmodrdn"<br /> LDAPPASSWDBIN="/usr/local/bin/ldappasswd"<br /> GETENTPWCMD="getent passwd"<br /> GETENTGRCMD="getent group"</div>
<p><br /> Закоментим две строчки в скрипте ldapadduser(касающие генерации пароля)</p>
<div class="codeheader">/usr/local/bin/ldapadd</div>
<div class="code"># Add the user's password<br /> #_changepassword "$_PASSWORD" "uid=$_USER,$USUFFIX,$SUFFIX"<br /> #[ $? -eq 0 ] &amp;&amp; echo_log "Successfully set password for user $1"</div>
<p> </p>
<p><span style="color: red;"><strong>2.4</strong></span> Добавляем группы admins,user,computers в ldap</p>
<div class="codeheader">/usr/local/etc/openldap/</div>
<div class="code">[root@localhost ldapscripts]# ldapaddgroup admins<br /> Successfully added group admins to LDAP<br /> <br /><br /> [root@localhost ldapscripts]# ldapaddgroup user<br /> Successfully added group user to LDAP<br /> <br /><br /> [root@localhost ldapscripts]# ldapaddgroup computers<br /> Successfully added group computers to LDAP</div>
<p><br /> Добавляем юзеров в группы: admin -&gt; admins ; test -&gt; user</p>
<div class="codeheader">/usr/local/etc/openldap/</div>
<div class="code">[root@localhost ldapscripts]# ldapadduser admin admins<br /> Successfully added user admin to LDAP<br /> Successfully created home directory for user admin<br /> <br /><br /> [root@localhost ldapscripts]# ldapadduser test user<br /> Successfully added user test to LDAP<br /> Successfully created home directory for user test<br /> <br /><br /> [root@localhost ldapscripts]# ls -l /home/<br /> drwx------ 2 admin admins 4096 Апр  2 00:28 admin<br /> drwx------ 2 test  user   4096 Апр  2 00:28 test<br /> <br /><br /> [root@localhost samba]# id admin<br /> uid=10001(admin) gid=10001(admins) группы=10001(admins)<br /> [root@localhost samba]# id test<br /> uid=10002(test) gid=10004(user) группы=10004(user)</div>
<p> </p>
<p><strong><span style="color: blue; font-size: small;">Настройка samba </span></strong></p>
<p><span style="color: red;"><strong>3.1</strong></span> Правим smb.conf</p>
<div class="codeheader">/etc/samba</div>
<div class="code">[global]<br /> workgroup = tester<br /> netbios name = spider<br /> server string = PDC-Server<br /> security = user<br /> hosts allow = 192.168.50.0/24, 192.168.1.0/24, 192.168.10.0/24, 127.0.0.1<br /> load printers = no<br /> log file = /var/log/samba/log.%m<br /> max log size = 500<br /> encrypt passwords = yes<br /> admin users = admin<br /> passdb backend = ldapsam:ldap://localhost/<br /> ldap suffix = dc=spacedust,dc=ru<br /> ldap user suffix = ou=users<br /> ldap group suffix = ou=groups<br /> ldap machine suffix = ou=computers<br /> ldap admin dn = "cn=root,dc=spacedust,dc=ru"<br /> ldap delete dn = yes<br /> ldap ssl = off<br /> socket options = IPTOS_LOWDELAY TCP_NODELAY SO_SNDBUF=4096 SO_RCVBUF=4096<br /> local master = yes<br /> os level = 64<br /> domain master = yes<br /> preferred master = yes<br /> domain logons = yes<br /> logon path = \\%L\Profiles\%U\%m\<br /> logon home = \\%L\Profiles\%U\%m\<br /> <br /><br /> wins support = yes<br /> dns proxy = no<br /> display charset = koi8-r<br /> unix charset = koi8-r<br /> dos charset = cp866<br /> time server = yes<br /> add machine script = /usr/local/bin/ldapaddmachine '%u' computers<br /> add user script = /usr/local/bin/ldapadduser '%u' users<br /> add group script = /usr/local/bin/ldapaddgroup '%g'<br /> add user to group script = /usr/local/bin/ldapaddusertogroup '%u' '%g'<br /> delete user script = /usr/local/bin/ldapdeleteuser '%u'<br /> delete group script = /usr/local/bin/ldapdeletegroup '%g'<br /> delete user from group script = /usr/local/bin/ldapdeleteuserfromgroup '%u' '%g'<br /> set primary group script = /usr/local/bin/ldapsetprimarygroup '%u' '%g'<br /> rename user script = /usr/local/bin/ldaprenameuser '%uold' '%unew'<br /> <br /><br /> [homes]<br /> comment = Home Directories<br /> browseable = no<br /> writable = yes<br /> <br /><br /> [netlogon]<br /> comment = Network Logon Service<br /> path = /samba/netlogon/<br /> guest ok = yes<br /> writable = no<br /> share modes = no<br /> browseable = no</div>
<p> </p>
<p><span style="color: red;"><strong>3.2</strong></span> Передадим samba пароль от ldap <br /> Добавим в samba пользователей admin и test</p>
<div class="codeheader">/etc/samba/</div>
<div class="code">[root@localhost samba]# smbpasswd -w 123456<br /> Setting stored password for "cn=root,dc=spacedust,dc=ru" in secrets.tdb<br /> [root@localhost samba]# smbpasswd -a admin<br /> New SMB password:<br /> Retype new SMB password:<br /> Added user admin.<br /> [root@localhost samba]# smbpasswd -a test<br /> New SMB password:<br /> Retype new SMB password:<br /> Added user test.<br /> [root@localhost samba]# smbpasswd -e admin<br /> Enabled user admin.<br /> [root@localhost samba]# smbpasswd -e test<br /> Enabled user test.</div>
<p><br />Проверим</p>
<div class="codeheader">/etc/samba/</div>
<div class="code">[root@localhost samba]# ldapsearch -LLL -x -b 'dc=spacedust,dc=ru' 'uid=test'<br /> dn: uid=test,ou=users,dc=spacedust,dc=ru<br /> objectClass: account<br /> objectClass: posixAccount<br /> objectClass: sambaSamAccount<br /> cn: test<br /> uid: test<br /> uidNumber: 10002<br /> gidNumber: 10004<br /> homeDirectory: /home/test<br /> loginShell: /sbin/nologin<br /> gecos: test<br /> description: test<br /> sambaSID: S-1-5-21-3439933763-4178935134-2055478027-21004<br /> displayName: test<br /> sambaLMPassword: CCF9155E3E7DB453AAD3B435B51404EE<br /> sambaNTPassword: 3DBDE697D71690A769204BEB12283678<br /> sambaPasswordHistory: 00000000000000000000000000000000000000000000000000000000<br /> 00000000<br /> sambaPwdLastSet: 1207085649<br /> sambaAcctFlags: [U          ]</div>
<p> </p>
<p><span style="color: red;"><strong>3.3</strong></span> Добавим доменные группы</p>
<div class="codeheader">/etc/samba</div>
<div class="code">[root@localhost samba]# net groupmap add unixgroup=admins rid=512 type=domain<br /> Successfully added group admins to the mapping db as a domain group<br /> <br /><br /> [root@localhost samba]# net groupmap add unixgroup=user rid=513 type=domain<br /> Successfully added group user to the mapping db as a domain group<br /> <br /><br /> [root@localhost samba]# net groupmap add unixgroup=computers rid=515 type=domain<br /> Successfully added group computers to the mapping db as a domain group<br /> <br /><br /> [root@localhost samba]# net groupmap list<br /> admins (S-1-5-21-3439933763-4178935134-2055478027-512) -&gt; admins<br /> computers (S-1-5-21-3439933763-4178935134-2055478027-515) -&gt; computers<br /> user (S-1-5-21-3439933763-4178935134-2055478027-513) -&gt; user<br /> <br /></div>
<p> </p>
<p><span style="color: red;"><strong>3.4</strong></span> Запускаем самбу и пробуем добавить тачку в домен</p>
<div class="codeheader">/etc/samba</div>
<div class="code">[root@localhost samba]# service smb start<br /> Запускаются службы SMB:                                    [  OK  ]<br /> Запускаются службы NMB:                                    [  OK  ]</div>
<p> </p>
<p>Добавляем под пользователем admin (пароль какой вводили в samba при добавлении)</p>
<p align="left"><img src="images/stories/pic/ldap/1.png" border="0" /><br /> <br /> Тачка computing успешно добавилась в ldap</p>
<div class="codeheader">/etc/samba</div>
<div class="code">[root@localhost samba]# ldapsearch -LLL -x -b 'dc=spacedust,dc=ru' 'uid=computing$'<br /> dn: uid=computing$,ou=computers,dc=spacedust,dc=ru  <br /> objectClass: account<br /> objectClass: posixAccount<br /> objectClass: sambaSamAccount <br /> cn: computing$ <br /> uid: computing$ <br /> uidNumber: 20001<br /> gidNumber: 10003<br /> homeDirectory: /dev/null<br /> loginShell: /bin/false<br /> gecos: computing$<br /> description: computing$ <br /> sambaSID: S-1-5-21-3439933763-4178935134-2055478027-1001 <br /> displayName: computing$<br /> sambaAcctFlags: [W          ]  <br /> sambaNTPassword: DE4568A0069360FC9175A869914C8676  <br /> sambaPwdLastSet: 1207087305</div>
<p><br /> Информация о домене</p>
<div class="codeheader">/etc/samba</div>
<div class="code">[root@localhost samba]# net rpc info -U admin<br /> Password:    <br /> Domain Name: TESTER <br /> Domain SID: S-1-5-21-3439933763-4178935134-2055478027 <br /> Sequence number: 1207087635  <br /> Num users: 2 <br /> Num domain groups: 3   <br /> Num local groups: 0</div>
<p> </p>
<h4><a href="http://www.lissyara.su/?id=1329"><span style="color: blue;">оригинальная статья под FREEBSD </span></a></h4>
<p> </p>